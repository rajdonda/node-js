<%- include('../header') %>
<style>
  table {
    width: 100%;
    border-collapse: collapse;
  }
  th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  th {
    background-color: #f4f4f4;
  }
  table img {
    width: 150px;
    height: 150px;
    object-fit: cover;
    border-radius: 8px;
  }
</style>
<div class="body-wrapper">
  <!-- Header Start -->
  <header class="app-header">
    <nav class="navbar navbar-expand-lg navbar-light">
      <ul class="navbar-nav">
        <li class="nav-item d-block d-xl-none">
          <a class="nav-link sidebartoggler" id="headerCollapse" href="javascript:void(0)">
            <i class="ti ti-menu-2"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="javascript:void(0)">
            <iconify-icon icon="solar:bell-linear" class="fs-6"></iconify-icon>
            <div class="notification bg-primary rounded-circle"></div>
          </a>
        </li>
      </ul>
      <div class="navbar-collapse justify-content-end px-0" id="navbarNav">
        <ul class="navbar-nav flex-row ms-auto align-items-center justify-content-end">
          <li class="nav-item dropdown">
            <a class="nav-link" href="javascript:void(0)" id="drop2" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="../assets/images/profile/user-1.jpg" alt="" width="35" height="35" class="rounded-circle">
            </a>
            <div class="dropdown-menu dropdown-menu-end dropdown-menu-animate-up" aria-labelledby="drop2">
              <div class="message-body">
                <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                  <i class="ti ti-user fs-6"></i>
                  <p class="mb-0 fs-3">My Profile</p>
                </a>
                <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                  <i class="ti ti-mail fs-6"></i>
                  <p class="mb-0 fs-3">My Account</p>
                </a>
                <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                  <i class="ti ti-list-check fs-6"></i>
                  <p class="mb-0 fs-3">My Task</p>
                </a>
                <a href="/logoutuser" class="btn btn-outline-primary mx-3 mt-2 d-block">Logout</a>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </nav>
  </header>
  <!-- Header End -->
  <% if (locals?.message?.success) { %>
    <div aria-live="polite" aria-atomic="true" class="position-fixed top-0 end-0 p-3" style="z-index: 1050;">
      <!-- Toast Container -->
      <div class="toast align-items-center" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="5000">
        <div class="toast-header">
          <img src="../assets/images/logos/uthr title logo.jpg" class="rounded me-2" alt="Success" width="20" height="20">
          <strong class="me-auto">Notification</strong>
          <small>Just now</small>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body text-success">
          <%= locals?.message?.success %>
        </div>
      </div>
    </div>
  <% } %>
  <% if (locals?.message?.delete) { %>
    <div aria-live="polite" aria-atomic="true" class="position-fixed top-0 end-0 p-3" style="z-index: 1050;">
      <!-- Toast Container -->
      <div class="toast align-items-center" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="5000">
        <div class="toast-header">
          <img src="../assets/images/logos/uthr title logo.jpg" class="rounded me-2" alt="Success" width="20" height="20">
          <strong class="me-auto">Notification</strong>
          <small>Just now</small>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body " style="color: #dc3545;">
          <%= locals?.message?.delete %>
        </div>
      </div>
    </div>
  <% } %>
  <% if (locals?.message?.update) { %>
    <div aria-live="polite" aria-atomic="true" class="position-fixed top-0 end-0 p-3" style="z-index: 1050;">
      <!-- Toast Container -->
      <div class="toast align-items-center" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="5000">
        <div class="toast-header">
          <img src="../assets/images/logos/uthr title logo.jpg" class="rounded me-2" alt="Success" width="20" height="20">
          <strong class="me-auto">Notification</strong>
          <small>Just now</small>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body text-success" >
            <%= locals?.message?.update %>
          
        </div>
      </div>
    </div>
  <% } %>
  <% if (locals?.message?.status) { %>
    <div aria-live="polite" aria-atomic="true" class="position-fixed top-0 end-0 p-3" style="z-index: 1050;">
      <!-- Toast Container -->
      <div class="toast align-items-center" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="5000">
        <div class="toast-header">
          <img src="../assets/images/logos/uthr title logo.jpg" class="rounded me-2" alt="Success" width="20" height="20">
          <strong class="me-auto">Notification</strong>
          <small>Just now</small>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body text-warning" >
          <%= locals?.message?.status %>
        </div>
      </div>
    </div>
  <% } %>
  <div class="body-wrapper-inner">
    <div class="container-fluid">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title fw-semibold mb-4">View Exsubcategories</h5>
          <div class="card">
            <div class="card-body">
              <h5 class="card-title fw-semibold mb-4">View Products</h5>
              <div class="card">
                <div class="card-body">
                  
                  
                  <table>
                    <thead>
                      <tr>
                        <th>Index</th>
                        <th>Category</th>
                        <th>Subcategory</th>
                        <th>Exsubcategory</th>
                        <th>Product Name</th>
                        <th>Price</th>
                        <th>Image</th>
                        <th>Description</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% products.map((product, index) => { %>
                        <tr>
                          <td><%= index + 1 %></td>
                          <td><%= product?.categoryId?.category %></td>
                          <td><%= product?.subcategoryId?.subcategory %></td>
                          <td><%= product?.exsubcategoryId?.exsubcategory %></td>
                          <td><%= product?.name %></td>
                          <td>$<%= product?.price %></td>
                          <td>
                            <img src="<%= product?.image %>" alt="Product Image">
                          </td>
                          <td><%= product?.description %></td>
                          <td>
                            <a href="/product/editproduct?id=<%= product.id %>" class="btn btn-primary btn-sm">Edit</a>
                            <a href="/product/deleteproduct?id=<%= product?.id %>" class="btn btn-danger btn-sm">Delete</a>
                          </td>
                        </tr>
                      <% }); %>
                    </tbody>
                  </table>
                  
                </div>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>

<script src="../assets/libs/jquery/dist/jquery.min.js"></script>
<script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="../assets/js/sidebarmenu.js"></script>
<script src="../assets/js/app.min.js"></script>
<script src="../assets/libs/simplebar/dist/simplebar.js"></script>
<!-- Solar Icons -->
<script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>
<script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>

</body>
</html>
